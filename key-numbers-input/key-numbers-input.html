<dom-module id="key-numbers-input">
    <template>

        <style is="custom-style">
        </style>

        <paper-card>
            <p>Key numbers</p>

            <paper-input value="{{value.key}}" label="Key" data-field="Key" on-input="onInput" on-change="onChange" disabled="[[disabled]]"></paper-input>
            <paper-input value="{{value.value}}" label="Value" data-field="value" on-input="onInput" on-change="onChange" disabled="[[disabled]]"></paper-input>
            <div>
                <div>
                    <paper-button on-tap="addKeyNumber">
                        <iron-icon icon="add"></iron-icon>
                        Add New Key number
                    </paper-button>
                </div>
            </div>

        </paper-card>

    </template>

    <script>
        Polymer({
            is: 'key-numbers-input',
            properties: {
                value: {
                    type: Object,
                    observer: '_valueChanged'
                },
                label: {
                    type: String
                },
                fieldName: {
                    type: String
                },
                entity: {
                    type: Object
                },
                schema: {
                    type: Object
                },
                disabled: {
                    type: Boolean,
                    value: false
                }
            },
            _valueChanged: function (newValue, oldValue) {
                if (!newValue) this.value = {};
            },
            triggerOnValueChanged: function () {
                if (this.disabled) return;
                this.fire('valueChanged', this.value);
            },
            onInput: function (e) {
                this.debounce('triggerOnValueChanged', this.triggerOnValueChanged, 2000);
            },
            onChange: function (e) {
                this.debounce('triggerOnValueChanged', this.triggerOnValueChanged, 0);
            },
            addKeyNumber: function (e) {
                console.log('Add New Key number');                
            }
        });
    </script>

</dom-module>