<link rel="import" href="../forge-shared/polymer.html">

<dom-module id="forge-flag-icon">

  <template>

    <style>
      :host {
        display: inline-block;
      }

      .flag {
        background-size: contain;
        background-position: center center;
        background-repeat: no-repeat;
        height: var(--forge-flag-icon-size, 40px);
        width: var(--forge-flag-icon-size, 40px);
        border-radius: 50%;
        border: 1px solid gray;
      }
    </style>

    <div class="flag" style$="[[src]]"></div>

  </template>

  <script>
    (function () {

      Polymer({
        is: 'forge-flag-icon',
        properties: {
          country: {
            type: String,
            observer: '_countryChanged'
          }
        },
        src: '',
        _countryChanged: function (newVal, oldVal) {

          if (!newVal) return;

          var flag = newVal.length == 5
            ? newVal.substring(3, 5).toLowerCase()
            : newVal.substring(0, 2).toLowerCase();

          var url = this.resolveUrl("flags/" + flag + ".svg");

          this.src = "background-image: url('" + url + "')";

        }
      });

    })();
  </script>

</dom-module>